# ç³»ç»Ÿé…ç½®ä¿¡æ¯æ‰‹å†Œ

> **æ›´æ–°æ—¶é—´**: 2025-10-25  
> **é€‚ç”¨ç¯å¢ƒ**: å¼€å‘/ç”Ÿäº§ç¯å¢ƒ  
> **âš ï¸ å®‰å…¨æç¤º**: æœ¬æ–‡æ¡£åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡ï¼Œå‹¿æ³„éœ²ç»™æ— å…³äººå‘˜

---

## ğŸ“‹ ç›®å½•

1. [PostgreSQLæ•°æ®åº“](#1-postgresqlæ•°æ®åº“)
2. [Redisç¼“å­˜](#2-redisç¼“å­˜)
3. [RabbitMQæ¶ˆæ¯é˜Ÿåˆ—](#3-rabbitmqæ¶ˆæ¯é˜Ÿåˆ—)
4. [FastAPIåº”ç”¨](#4-fastapiåº”ç”¨)
5. [Celeryä»»åŠ¡é˜Ÿåˆ—](#5-celeryä»»åŠ¡é˜Ÿåˆ—)
6. [Flowerç›‘æ§](#6-flowerç›‘æ§)
7. [ç®¡ç†åå°](#7-ç®¡ç†åå°)
8. [æ•°æ®åº“æ“ä½œå‘½ä»¤](#8-æ•°æ®åº“æ“ä½œå‘½ä»¤)
9. [ç¯å¢ƒå˜é‡é…ç½®](#9-ç¯å¢ƒå˜é‡é…ç½®)

---

## 1. PostgreSQLæ•°æ®åº“

### è¿æ¥ä¿¡æ¯

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **å®¹å™¨åç§°** | `notification-db` | Dockerå®¹å™¨å |
| **é•œåƒ** | `postgres:14-alpine` | PostgreSQLç‰ˆæœ¬ |
| **ä¸»æœºåœ°å€** | `localhost` / `notification-db` | æœ¬åœ°/å®¹å™¨å†… |
| **ç«¯å£** | `5432` | å¯¹å¤–æ˜ å°„ç«¯å£ |
| **æ•°æ®åº“å** | `notification_db` | æ•°æ®åº“åç§° |
| **ç”¨æˆ·å** | `notification_user` | æ•°æ®åº“ç”¨æˆ· |
| **å¯†ç ** | `changeme` | é»˜è®¤å¯†ç ï¼ˆå»ºè®®ä¿®æ”¹ï¼‰ |
| **è¿æ¥URL** | `postgresql://notification_user:changeme@localhost:5432/notification_db` | å®Œæ•´è¿æ¥å­—ç¬¦ä¸² |

### è¿æ¥å‘½ä»¤

```bash
# æ–¹å¼1ï¼šé€šè¿‡Dockerå®¹å™¨è¿æ¥
docker-compose exec postgres psql -U notification_user -d notification_db

# æ–¹å¼2ï¼šä»å®¿ä¸»æœºè¿æ¥ï¼ˆéœ€è¦å®‰è£…psqlå®¢æˆ·ç«¯ï¼‰
psql -h localhost -p 5432 -U notification_user -d notification_db

# æ–¹å¼3ï¼šPythonè¿æ¥
from sqlalchemy import create_engine
engine = create_engine("postgresql://notification_user:changeme@localhost:5432/notification_db")
```

### æ•°æ®åº“è¡¨ç»“æ„

ä¸»è¦æ•°æ®è¡¨ï¼š
- `message_records` - æ¶ˆæ¯è®°å½•è¡¨
- `email_accounts` - é‚®ç®±è´¦å·è¡¨
- `message_templates` - æ¶ˆæ¯æ¨¡æ¿è¡¨
- `message_template_history` - æ¨¡æ¿å†å²è¡¨
- `api_keys` - APIå¯†é’¥è¡¨
- `admin_users` - ç®¡ç†å‘˜ç”¨æˆ·è¡¨

### å¤‡ä»½ä¸æ¢å¤

```bash
# å¤‡ä»½æ•°æ®åº“
docker-compose exec postgres pg_dump -U notification_user notification_db > backup_$(date +%Y%m%d).sql

# æ¢å¤æ•°æ®åº“
docker-compose exec -T postgres psql -U notification_user -d notification_db < backup_20251025.sql
```

### æ•°æ®å·

- **å®¹å™¨å†…è·¯å¾„**: `/var/lib/postgresql/data`
- **æ•°æ®å·åç§°**: `dingdong_postgres_data`
- **å¤‡ä»½ç›®å½•**: `./backups`ï¼ˆæ˜ å°„åˆ°å®¹å™¨çš„`/backups`ï¼‰

---

## 2. Redisç¼“å­˜

### è¿æ¥ä¿¡æ¯

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **å®¹å™¨åç§°** | `notification-redis` | Dockerå®¹å™¨å |
| **é•œåƒ** | `redis:7-alpine` | Redisç‰ˆæœ¬ |
| **ä¸»æœºåœ°å€** | `localhost` / `notification-redis` | æœ¬åœ°/å®¹å™¨å†… |
| **ç«¯å£** | `6379` | å¯¹å¤–æ˜ å°„ç«¯å£ |
| **å¯†ç ** | æ— ï¼ˆé»˜è®¤ï¼‰ | å¯é€šè¿‡`REDIS_PASSWORD`è®¾ç½® |
| **è¿æ¥URL** | `redis://localhost:6379/0` | å®Œæ•´è¿æ¥å­—ç¬¦ä¸² |
| **æ•°æ®åº“ç¼–å·** | `0` - APIç¼“å­˜<br>`1` - Celeryç»“æœ | å¤šä¸ªDBéš”ç¦» |

### è¿æ¥å‘½ä»¤

```bash
# é€šè¿‡Dockerå®¹å™¨è¿æ¥
docker-compose exec redis redis-cli

# æµ‹è¯•è¿æ¥
docker-compose exec redis redis-cli ping
# è¾“å‡ºï¼šPONG

# æŸ¥çœ‹æ‰€æœ‰é”®
docker-compose exec redis redis-cli KEYS "*"

# æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯
docker-compose exec redis redis-cli INFO
```

### å¸¸ç”¨æ“ä½œ

```bash
# æ¸…ç©ºå½“å‰æ•°æ®åº“
redis-cli FLUSHDB

# æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“
redis-cli FLUSHALL

# æŸ¥çœ‹ç‰¹å®šé”®
redis-cli GET "key_name"

# è®¾ç½®é”®å€¼
redis-cli SET "key_name" "value"

# è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
redis-cli EXPIRE "key_name" 3600
```

### æ•°æ®å·

- **å®¹å™¨å†…è·¯å¾„**: `/data`
- **æ•°æ®å·åç§°**: `dingdong_redis_data`
- **æŒä¹…åŒ–**: AOFæ¨¡å¼ï¼ˆ`appendonly yes`ï¼‰

---

## 3. RabbitMQæ¶ˆæ¯é˜Ÿåˆ—

### è¿æ¥ä¿¡æ¯

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **å®¹å™¨åç§°** | `notification-rabbitmq` | Dockerå®¹å™¨å |
| **é•œåƒ** | `rabbitmq:3.11-management-alpine` | RabbitMQç‰ˆæœ¬ |
| **ä¸»æœºåœ°å€** | `localhost` / `notification-rabbitmq` | æœ¬åœ°/å®¹å™¨å†… |
| **AMQPç«¯å£** | `5672` | æ¶ˆæ¯é˜Ÿåˆ—ç«¯å£ |
| **ç®¡ç†ç•Œé¢ç«¯å£** | `15672` | Webç®¡ç†ç•Œé¢ |
| **ç”¨æˆ·å** | `admin` | é»˜è®¤ç”¨æˆ· |
| **å¯†ç ** | `changeme` | é»˜è®¤å¯†ç ï¼ˆå»ºè®®ä¿®æ”¹ï¼‰ |
| **è¿æ¥URL** | `amqp://admin:changeme@localhost:5672//` | å®Œæ•´è¿æ¥å­—ç¬¦ä¸² |
| **ç®¡ç†ç•Œé¢URL** | `http://localhost:15672` | Webç®¡ç†åœ°å€ |

### è®¿é—®ç®¡ç†ç•Œé¢

1. æµè§ˆå™¨æ‰“å¼€ï¼š`http://localhost:15672`
2. ç”¨æˆ·åï¼š`admin`
3. å¯†ç ï¼š`changeme`

### é˜Ÿåˆ—ä¿¡æ¯

ä¸»è¦é˜Ÿåˆ—ï¼š
- **é»˜è®¤é˜Ÿåˆ—**: Celeryä»»åŠ¡é˜Ÿåˆ—
- **æ­»ä¿¡é˜Ÿåˆ—**: å¤±è´¥ä»»åŠ¡å¤„ç†

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹é˜Ÿåˆ—çŠ¶æ€
docker-compose exec rabbitmq rabbitmqctl list_queues

# æŸ¥çœ‹è¿æ¥
docker-compose exec rabbitmq rabbitmqctl list_connections

# æŸ¥çœ‹äº¤æ¢æœº
docker-compose exec rabbitmq rabbitmqctl list_exchanges

# æ¸…ç©ºé˜Ÿåˆ—
docker-compose exec rabbitmq rabbitmqctl purge_queue queue_name
```

### æ•°æ®å·

- **å®¹å™¨å†…è·¯å¾„**: `/var/lib/rabbitmq`
- **æ•°æ®å·åç§°**: `dingdong_rabbitmq_data`

---

## 4. FastAPIåº”ç”¨

### æœåŠ¡ä¿¡æ¯

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **å®¹å™¨åç§°** | `notification-api` | Dockerå®¹å™¨å |
| **ä¸»æœºåœ°å€** | `localhost` | æœ¬åœ°è®¿é—® |
| **ç«¯å£** | `8000` | APIæœåŠ¡ç«¯å£ |
| **åŸºç¡€URL** | `http://localhost:8000` | APIåŸºç¡€åœ°å€ |
| **æ–‡æ¡£URL** | `http://localhost:8000/docs` | Swaggeræ–‡æ¡£ |
| **ReDoc URL** | `http://localhost:8000/redoc` | ReDocæ–‡æ¡£ |
| **å¥åº·æ£€æŸ¥** | `http://localhost:8000/health` | å¥åº·æ£€æŸ¥ç«¯ç‚¹ |
| **Workersæ•°é‡** | `4` | Uvicornå·¥ä½œè¿›ç¨‹æ•° |

### APIç«¯ç‚¹

ä¸»è¦APIè·¯å¾„ï¼š
- `/api/v1/messages` - æ¶ˆæ¯ç®¡ç†
- `/api/v1/templates` - æ¨¡æ¿ç®¡ç†
- `/api/v1/admin/email-accounts` - é‚®ç®±è´¦å·ç®¡ç†
- `/api/v1/admin/auth` - ç®¡ç†å‘˜è®¤è¯
- `/api/v1/monitoring` - ç³»ç»Ÿç›‘æ§

### æ—¥å¿—ä½ç½®

- **å®¹å™¨å†…è·¯å¾„**: `/app/logs`
- **å®¿ä¸»æœºè·¯å¾„**: `./logs`

---

## 5. Celeryä»»åŠ¡é˜Ÿåˆ—

### WorkeræœåŠ¡

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **å®¹å™¨åç§°** | `notification-worker` | Dockerå®¹å™¨å |
| **å¹¶å‘æ•°** | `4` | Workerå¹¶å‘æ•° |
| **ä»»åŠ¡è¶…æ—¶** | `300ç§’` | å•ä¸ªä»»åŠ¡æœ€å¤§æ‰§è¡Œæ—¶é—´ |
| **æ—¥å¿—çº§åˆ«** | `info` | æ—¥å¿—è®°å½•çº§åˆ« |

### Beatå®šæ—¶ä»»åŠ¡

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **å®¹å™¨åç§°** | `notification-beat` | Dockerå®¹å™¨å |
| **è°ƒåº¦æ–‡ä»¶** | `celerybeat-schedule` | å®šæ—¶ä»»åŠ¡è°ƒåº¦æ•°æ®åº“ |

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹WorkerçŠ¶æ€
docker-compose exec celery-worker celery -A app.tasks.celery_app inspect active

# æŸ¥çœ‹å®šæ—¶ä»»åŠ¡
docker-compose exec celery-beat celery -A app.tasks.celery_app inspect scheduled

# æ¸…ç©ºä»»åŠ¡é˜Ÿåˆ—
docker-compose exec celery-worker celery -A app.tasks.celery_app purge

# é‡å¯Worker
docker-compose restart celery-worker

# é‡å¯Beat
docker-compose restart celery-beat
```

---

## 6. Flowerç›‘æ§

### è¿æ¥ä¿¡æ¯

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **å®¹å™¨åç§°** | `notification-flower` | Dockerå®¹å™¨å |
| **ç«¯å£** | `5555` | Webç•Œé¢ç«¯å£ |
| **è®¿é—®URL** | `http://localhost:5555` | Flowerç®¡ç†ç•Œé¢ |
| **ç”¨æˆ·å** | `admin` | é»˜è®¤ç”¨æˆ· |
| **å¯†ç ** | `flower_dev_pass_2025` | å½“å‰å¯†ç  |

### åŠŸèƒ½è¯´æ˜

- **ä»»åŠ¡ç›‘æ§**: å®æ—¶æŸ¥çœ‹Celeryä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
- **Workerç®¡ç†**: æŸ¥çœ‹å’Œç®¡ç†Workerè¿›ç¨‹
- **ä»»åŠ¡ç»Ÿè®¡**: ä»»åŠ¡æˆåŠŸç‡ã€å¤±è´¥ç‡ç»Ÿè®¡
- **ä»»åŠ¡è¿½è¸ª**: æŸ¥çœ‹ä»»åŠ¡è¯¦ç»†æ‰§è¡Œæ—¥å¿—

### æ•°æ®æŒä¹…åŒ–

- **å®¹å™¨å†…è·¯å¾„**: `/data/flower.db`
- **æ•°æ®å·åç§°**: `dingdong_flower_data`

---

## 7. ç®¡ç†åå°

### å‰ç«¯æœåŠ¡

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **é¡¹ç›®ç›®å½•** | `./admin-frontend` | å‰ç«¯é¡¹ç›®è·¯å¾„ |
| **å¼€å‘ç«¯å£** | `8080` | Viteå¼€å‘æœåŠ¡å™¨ç«¯å£ |
| **è®¿é—®URL** | `http://localhost:8080` | å‰ç«¯è®¿é—®åœ°å€ |
| **APIä»£ç†** | `/api -> http://localhost:8000/api` | APIè¯·æ±‚ä»£ç† |

### ç®¡ç†å‘˜è´¦å·

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **ç”¨æˆ·å** | `admin` | é»˜è®¤ç®¡ç†å‘˜ç”¨æˆ·å |
| **å¯†ç ** | `admin123` | é»˜è®¤å¯†ç ï¼ˆå»ºè®®ä¿®æ”¹ï¼‰ |
| **é‚®ç®±** | `admin@example.com` | ç®¡ç†å‘˜é‚®ç®± |

### å¯åŠ¨å‘½ä»¤

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd admin-frontend

# å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

---

## 8. æ•°æ®åº“æ“ä½œå‘½ä»¤

### å¿«é€Ÿè¿æ¥

```bash
# è¿æ¥PostgreSQL
docker-compose exec postgres psql -U notification_user -d notification_db

# è¿æ¥Redis
docker-compose exec redis redis-cli

# æŸ¥çœ‹RabbitMQé˜Ÿåˆ—
docker-compose exec rabbitmq rabbitmqctl list_queues
```

### å¸¸ç”¨SQLæŸ¥è¯¢

```sql
-- æŸ¥çœ‹æ‰€æœ‰æ¶ˆæ¯è®°å½•
SELECT id, subject, status, created_at FROM message_records ORDER BY created_at DESC LIMIT 10;

-- æŸ¥çœ‹é‚®ç®±è´¦å·
SELECT id, email, smtp_host, smtp_port, is_active FROM email_accounts;

-- æŸ¥çœ‹æ¶ˆæ¯ç»Ÿè®¡
SELECT 
    status,
    COUNT(*) as count,
    DATE(created_at) as date
FROM message_records
GROUP BY status, DATE(created_at)
ORDER BY date DESC;

-- æŸ¥çœ‹ä»Šå¤©çš„æ¶ˆæ¯
SELECT * FROM message_records 
WHERE created_at >= CURRENT_DATE 
ORDER BY created_at DESC;

-- ä¿®å¤æ—¶åŒºé—®é¢˜ï¼ˆå°†UTCæ—¶é—´è½¬ä¸ºæœ¬åœ°æ—¶é—´+8å°æ—¶ï¼‰
UPDATE message_records
SET 
    created_at = created_at + INTERVAL '8 hours',
    updated_at = updated_at + INTERVAL '8 hours',
    sent_at = CASE WHEN sent_at IS NOT NULL THEN sent_at + INTERVAL '8 hours' ELSE NULL END;

-- æŸ¥çœ‹ç®¡ç†å‘˜ç”¨æˆ·
SELECT id, username, nickname, email, is_active, last_login_at FROM admin_users;
```

### æ•°æ®åº“ç»´æŠ¤

```sql
-- æŸ¥çœ‹æ•°æ®åº“å¤§å°
SELECT pg_size_pretty(pg_database_size('notification_db'));

-- æŸ¥çœ‹è¡¨å¤§å°
SELECT 
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;

-- æ¸…ç†æ—§æ•°æ®ï¼ˆè°¨æ…æ“ä½œï¼ï¼‰
DELETE FROM message_records WHERE created_at < NOW() - INTERVAL '30 days';

-- åˆ†æè¡¨ï¼ˆä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼‰
ANALYZE message_records;

-- é‡å»ºç´¢å¼•
REINDEX TABLE message_records;
```

---

## 9. ç¯å¢ƒå˜é‡é…ç½®

### å¿…éœ€ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```bash
# ==================== åŸºç¡€é…ç½® ====================
ENV=development
DEBUG=false
LOG_LEVEL=INFO
TZ=Asia/Shanghai

# ==================== åº”ç”¨é…ç½® ====================
APP_NAME=notification-platform
APP_VERSION=1.0.0
SECRET_KEY=your-secret-key-change-me-in-production
ALLOWED_HOSTS=*

# ==================== æ•°æ®åº“é…ç½® ====================
DATABASE_URL=postgresql://notification_user:changeme@postgres:5432/notification_db
DB_PASSWORD=changeme
DB_PORT=5432
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=15
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=false

# ==================== Redisé…ç½® ====================
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=
REDIS_PORT=6379
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ==================== RabbitMQé…ç½® ====================
RABBITMQ_URL=amqp://admin:changeme@rabbitmq:5672//
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=changeme
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_PREFETCH_COUNT=10
RABBITMQ_HEARTBEAT=60

# ==================== JWTé…ç½® ====================
JWT_SECRET_KEY=your-jwt-secret-key-change-me
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60
JWT_REFRESH_EXPIRE_DAYS=7

# ==================== åŠ å¯†é…ç½® ====================
# ç”Ÿæˆæ–¹æ³•: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-encryption-key-change-me

# ==================== SMTPé…ç½® ====================
EMAIL_TIMEOUT=30
EMAIL_MAX_SIZE=20971520
EMAIL_USE_TLS=true

# ==================== é™„ä»¶é…ç½® ====================
ATTACHMENT_STORAGE_PATH=/data/attachments
ATTACHMENT_MAX_SIZE=10485760
ATTACHMENT_EXPIRE_DAYS=7

# ==================== Celeryé…ç½® ====================
CELERY_BROKER_URL=amqp://admin:changeme@rabbitmq:5672//
CELERY_RESULT_BACKEND=redis://redis:6379/1
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=270

# ==================== Floweré…ç½® ====================
FLOWER_USER=admin
FLOWER_PASSWORD=flower_dev_pass_2025
FLOWER_PORT=5555

# ==================== APIé…ç½® ====================
API_PORT=8000
API_V1_PREFIX=/api/v1
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]
WORKERS=4

# ==================== ç›‘æ§é…ç½® ====================
PROMETHEUS_ENABLED=true
METRICS_PORT=9090

# ==================== é™æµé…ç½® ====================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
```

### ç”ŸæˆåŠ å¯†å¯†é’¥

```bash
# ç”ŸæˆFernetåŠ å¯†å¯†é’¥
python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"

# ç”Ÿæˆéšæœºå¯†é’¥
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

---

## 10. Dockeræ“ä½œå‘½ä»¤

### æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose stop

# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨
docker-compose down

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f [service_name]

# é‡å¯å•ä¸ªæœåŠ¡
docker-compose restart api
docker-compose restart celery-worker
docker-compose restart postgres
```

### å®¹å™¨æ“ä½œ

```bash
# è¿›å…¥å®¹å™¨
docker-compose exec api bash
docker-compose exec postgres bash

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs -f --tail=100 api

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats notification-api notification-worker notification-db
```

### æ•°æ®å·ç®¡ç†

```bash
# æŸ¥çœ‹æ•°æ®å·
docker volume ls | grep dingdong

# æŸ¥çœ‹æ•°æ®å·è¯¦æƒ…
docker volume inspect dingdong_postgres_data

# å¤‡ä»½æ•°æ®å·
docker run --rm -v dingdong_postgres_data:/data -v $(pwd):/backup alpine tar czf /backup/postgres_backup.tar.gz -C /data .

# æ¢å¤æ•°æ®å·
docker run --rm -v dingdong_postgres_data:/data -v $(pwd):/backup alpine tar xzf /backup/postgres_backup.tar.gz -C /data
```

---

## 11. æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨

```bash
# 1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker-compose logs [service_name]

# 3. æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr "5432"
netstat -ano | findstr "6379"
netstat -ano | findstr "5672"
netstat -ano | findstr "8000"

# 4. é‡å¯æœåŠ¡
docker-compose restart [service_name]
```

### æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# 1. æ£€æŸ¥æ•°æ®åº“æœåŠ¡çŠ¶æ€
docker-compose ps postgres

# 2. æµ‹è¯•æ•°æ®åº“è¿æ¥
docker-compose exec postgres pg_isready -U notification_user

# 3. æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs postgres

# 4. é‡å¯æ•°æ®åº“
docker-compose restart postgres
```

### Redisè¿æ¥å¤±è´¥

```bash
# 1. æµ‹è¯•Redisè¿æ¥
docker-compose exec redis redis-cli ping

# 2. æŸ¥çœ‹Redisæ—¥å¿—
docker-compose logs redis

# 3. æ¸…ç©ºRedisç¼“å­˜
docker-compose exec redis redis-cli FLUSHALL
```

---

## 12. å®‰å…¨å»ºè®®

### ğŸ”’ ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹çš„é…ç½®

1. **æ•°æ®åº“å¯†ç **: `DB_PASSWORD`
2. **RabbitMQå¯†ç **: `RABBITMQ_PASSWORD`
3. **Flowerå¯†ç **: `FLOWER_PASSWORD`
4. **JWTå¯†é’¥**: `JWT_SECRET_KEY`
5. **åŠ å¯†å¯†é’¥**: `ENCRYPTION_KEY`
6. **åº”ç”¨å¯†é’¥**: `SECRET_KEY`
7. **ç®¡ç†å‘˜å¯†ç **: ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 

### ğŸ›¡ï¸ å®‰å…¨æœ€ä½³å®è·µ

- âœ… å®šæœŸæ›´æ¢å¯†ç å’Œå¯†é’¥
- âœ… ä½¿ç”¨å¼ºå¯†ç ï¼ˆåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
- âœ… é™åˆ¶æ•°æ®åº“å’ŒRedisåªå…è®¸æœ¬åœ°è®¿é—®
- âœ… å¯ç”¨é˜²ç«å¢™ï¼Œåªå¼€æ”¾å¿…è¦ç«¯å£
- âœ… å®šæœŸå¤‡ä»½æ•°æ®åº“
- âœ… ç›‘æ§å¼‚å¸¸ç™»å½•å’ŒAPIè°ƒç”¨
- âœ… ä½¿ç”¨HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-25  
**ç»´æŠ¤äººå‘˜**: DevOpså›¢é˜Ÿ

